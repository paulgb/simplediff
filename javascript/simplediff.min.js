/* 
Simple Diff for Python version 1.0 (ported to javascript)

Annotate two versions of a list with the values that have been
changed between the versions, similar to unix's `diff` but with
a dead-simple Python interface.

(C) Paul Butler 2008-2012 <http://www.paulbutler.org/>
May be used and distributed under the zlib/libpng license
<http://www.opensource.org/licenses/zlib-license.php>
*/
var diff=function(a,b){var c={},i;for(i=0;i<a.length;i++){c[a[i]]=c[a[i]]||[];c[a[i]].push(i)}var d=[],startOld,startNew,subLength,inew;startOld=startNew=subLength=0;for(inew=0;inew<b.length;inew++){var e=[];c[b[inew]]=c[b[inew]]||[];for(i=0;i<c[b[inew]].length;i++){var f=c[b[inew]][i];e[f]=((f&&d[f-1])||0)+1;if(e[f]>subLength){subLength=e[f];startOld=f-subLength+1;startNew=inew-subLength+1}}d=e}if(subLength===0){var g=[];a.length&&g.push(['-',a]);b.length&&g.push(['+',b]);return g}return[].concat(diff(a.slice(0,startOld),b.slice(0,startNew)),[['=',b.slice(startNew,startNew+subLength)]],diff(a.slice(startOld+subLength),b.slice(startNew+subLength)))};var stringDiff=function(a,b){return diff(a.split(/[ ]+/),b.split(/[ ]+/))};var htmlDiff=function(c,d){var a,b,con,diff,i,results=[];con={'=':function(x){return x},'+':function(x){return'<ins>'+x+'</ins>'},'-':function(x){return'<del>'+x+'</del>'}};diff=stringDiff(c,d);for(i=0;i<diff.length;i++){var e=diff[i];results.push(con[e[0]](e[1].join(' ')))}return results.join(' ')};var checkDiff=function(a,b){a=[a];b=[b];var c=window.console||{assert:function(){}},result=diff(a,b),_before=[],_after=[],i;for(i=0;i<result.length;i++){switch(result[i][0]){case'-':_before=_before.concat(result[i][1]);break;case'+':_after=_after.concat(result[i][1]);break;default:_before=_before.concat(result[i][1]);_after=_after.concat(result[i][1])}}c.assert(JSON.stringify(a)===JSON.stringify(_before),'Expected',a,'got',_before);c.assert(JSON.stringify(b)===JSON.stringify(_after),'Expected',b,'got',_after)};
